{"ast":null,"code":"import React,{useState,useEffect,useRef}from'react';import{useAuth}from'../context/AuthContext';import{chatAPI,documentAPI}from'../services/api';import{guestService}from'../services/guestService';import ConfirmationModal from'../components/ConfirmationModal';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const DashboardPage=()=>{var _user$full_name;const{user,logout,isGuestMode}=useAuth();const[messages,setMessages]=useState([]);const[inputMessage,setInputMessage]=useState('');const[isLoading,setIsLoading]=useState(false);const[documents,setDocuments]=useState([]);const[isUploading,setIsUploading]=useState(false);const[sidebarOpen,setSidebarOpen]=useState(false);const[selectedDocuments,setSelectedDocuments]=useState([]);const[contextMode,setContextMode]=useState('none');const[isModalOpen,setIsModalOpen]=useState(false);const[documentToDelete,setDocumentToDelete]=useState(null);const messagesEndRef=useRef(null);useEffect(()=>{loadChatHistory();loadDocuments();},[]);useEffect(()=>{scrollToBottom();},[messages]);const scrollToBottom=()=>{var _messagesEndRef$curre;(_messagesEndRef$curre=messagesEndRef.current)===null||_messagesEndRef$curre===void 0?void 0:_messagesEndRef$curre.scrollIntoView({behavior:'smooth'});};const loadChatHistory=async()=>{try{if(isGuestMode){const guestHistory=guestService.getChatHistory();// Convert guest messages to regular format for display\nconst convertedMessages=guestHistory.map(msg=>({id:parseInt(msg.id),user_id:-1,message:msg.message,response:msg.response,context_documents:msg.context_documents,created_at:msg.created_at}));setMessages(convertedMessages);}else{const response=await chatAPI.getChatHistory();setMessages(response.history.reverse());}}catch(error){console.error('Error loading chat history:',error);}};const loadDocuments=async()=>{try{if(isGuestMode){const guestDocs=guestService.getDocuments();// Convert guest documents to regular format for display\nconst convertedDocs=guestDocs.map(doc=>({id:parseInt(doc.id),filename:doc.filename,file_type:doc.file_type,created_at:doc.created_at,content_length:doc.content.length}));setDocuments(convertedDocs);}else{const response=await documentAPI.getDocuments();setDocuments(response.documents);}}catch(error){console.error('Error loading documents:',error);}};const handleSendMessage=async e=>{e.preventDefault();if(!inputMessage.trim()||isLoading)return;const userMessage=inputMessage;setInputMessage('');setIsLoading(true);// Add user message to chat\nconst newUserMessage={id:Date.now(),user_id:(user===null||user===void 0?void 0:user.id)||0,message:userMessage,response:'',created_at:new Date().toISOString()};setMessages(prev=>[...prev,newUserMessage]);try{if(isGuestMode){// Guest mode - use full AI functionality\nconst useSelectedDocs=contextMode==='selected'?selectedDocuments.map(id=>id.toString()):undefined;const useAllDocs=contextMode==='all';const response=await guestService.generateAIResponse(userMessage,useSelectedDocs,useAllDocs);// Save to guest storage\nconst guestMessage=guestService.saveChatMessage({message:userMessage,response:response.response,context_documents:response.context_sources.length>0?JSON.stringify(response.context_sources):undefined});// Convert to display format\nconst assistantMessage={id:parseInt(guestMessage.id),user_id:-1,message:userMessage,response:response.response,context_documents:guestMessage.context_documents,created_at:guestMessage.created_at};setMessages(prev=>[...prev.slice(0,-1),assistantMessage]);}else{// Regular mode - API call\nconst useSelectedDocs=contextMode==='selected'?selectedDocuments:undefined;const useAllDocs=contextMode==='all';const response=await chatAPI.sendMessage(userMessage,useSelectedDocs,useAllDocs);// Add assistant response with context info\nconst assistantMessage={id:Date.now()+1,user_id:(user===null||user===void 0?void 0:user.id)||0,message:userMessage,response:response.response,context_documents:JSON.stringify(response.context_sources),created_at:new Date().toISOString()};setMessages(prev=>[...prev.slice(0,-1),assistantMessage]);}}catch(error){console.error('Error sending message:',error);// Update the user message to show error\nsetMessages(prev=>[...prev.slice(0,-1),{...newUserMessage,response:'Sorry, I encountered an error. Please try again.'}]);}finally{setIsLoading(false);}};const handleFileUpload=async e=>{var _e$target$files;const file=(_e$target$files=e.target.files)===null||_e$target$files===void 0?void 0:_e$target$files[0];if(!file)return;setIsUploading(true);try{if(isGuestMode){// Guest mode - process locally\nconst extractedText=await guestService.extractTextFromFile(file);guestService.saveDocument({filename:file.name,content:extractedText,file_type:file.type||'unknown'});loadDocuments();// Add a system message about the upload\nconst systemMessage={id:Date.now(),user_id:-1,message:`Uploaded document: ${file.name}`,response:`Successfully uploaded \"${file.name}\" with full text extraction. You can now ask questions about this document or select it for context in your conversations. Your data is stored locally in guest mode and will be cleared when you close the browser.`,created_at:new Date().toISOString()};setMessages(prev=>[...prev,systemMessage]);}else{// Regular mode - API upload\nawait documentAPI.upload(file);loadDocuments();// Add a system message about the upload\nconst systemMessage={id:Date.now(),user_id:(user===null||user===void 0?void 0:user.id)||0,message:`Uploaded document: ${file.name}`,response:`Successfully uploaded \"${file.name}\". You can now ask questions about this document.`,created_at:new Date().toISOString()};setMessages(prev=>[...prev,systemMessage]);}}catch(error){console.error('Error uploading file:',error);alert('Error uploading file. Please try again.');}finally{setIsUploading(false);}};const handleLogout=()=>{logout();};const handleDocumentSelect=documentId=>{setSelectedDocuments(prev=>{if(prev.includes(documentId)){return prev.filter(id=>id!==documentId);}else{return[...prev,documentId];}});};const handleDeleteDocument=documentId=>{setDocumentToDelete(documentId);setIsModalOpen(true);};const confirmDelete=async()=>{if(!documentToDelete)return;try{if(isGuestMode){// Guest mode - delete from local storage\nconst success=guestService.deleteDocument(documentToDelete.toString());if(success){setDocuments(prev=>prev.filter(doc=>doc.id!==documentToDelete));setSelectedDocuments(prev=>prev.filter(id=>id!==documentToDelete));const systemMessage={id:Date.now(),user_id:-1,message:'Document deleted',response:'The document has been successfully deleted from guest storage.',created_at:new Date().toISOString()};setMessages(prev=>[...prev,systemMessage]);}else{throw new Error('Failed to delete document from local storage');}}else{// Regular mode - API delete\nawait documentAPI.deleteDocument(documentToDelete);setDocuments(prev=>prev.filter(doc=>doc.id!==documentToDelete));setSelectedDocuments(prev=>prev.filter(id=>id!==documentToDelete));const systemMessage={id:Date.now(),user_id:(user===null||user===void 0?void 0:user.id)||0,message:'Document deleted',response:'The document has been successfully deleted.',created_at:new Date().toISOString()};setMessages(prev=>[...prev,systemMessage]);}}catch(error){console.error('Error deleting document:',error);alert('Failed to delete the document. Please try again.');}finally{setDocumentToDelete(null);}};const handleContextModeChange=mode=>{setContextMode(mode);if(mode==='none'){setSelectedDocuments([]);}else if(mode==='all'){setSelectedDocuments([]);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"flex h-screen bg-gray-100\",children:[/*#__PURE__*/_jsxs(\"div\",{className:`${sidebarOpen?'translate-x-0':'-translate-x-full'} fixed inset-y-0 left-0 z-50 w-64 bg-white shadow-lg transform transition-transform duration-300 ease-in-out lg:translate-x-0 lg:static lg:inset-0 flex flex-col`,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between h-16 px-4 bg-primary-600 text-white flex-shrink-0\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-xl font-bold\",children:\"AskStash\"}),isGuestMode&&/*#__PURE__*/_jsx(\"span\",{className:\"text-xs bg-amber-500 text-white px-2 py-1 rounded-full\",children:\"Guest Mode\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setSidebarOpen(false),className:\"lg:hidden\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"w-6 h-6\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M6 18L18 6M6 6l12 12\"})})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 overflow-y-auto p-4\",children:[isGuestMode&&/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4 p-3 bg-amber-50 border border-amber-200 rounded-lg\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center mb-2\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"w-4 h-4 text-amber-600 mr-2\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\"})}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium text-amber-800\",children:\"Guest Mode Active\"})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-amber-700\",children:[\"Full functionality available! Your data is stored locally and will be cleared when you close the browser.\",/*#__PURE__*/_jsx(\"span\",{className:\"block mt-1 font-medium\",children:\"Register for permanent storage across devices!\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"file-upload\",className:\"btn-primary block text-center cursor-pointer\",children:isUploading?'Uploading...':'Upload Document'}),/*#__PURE__*/_jsx(\"input\",{id:\"file-upload\",type:\"file\",className:\"hidden\",accept:\".pdf,.doc,.docx,.txt,.md,.csv,.jpg,.jpeg,.png,.gif,.bmp,.webp,.tiff\",onChange:handleFileUpload,disabled:isUploading})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-sm font-medium text-gray-700 mb-2\",children:\"Context Mode\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:\"contextMode\",value:\"none\",checked:contextMode==='none',onChange:()=>handleContextModeChange('none'),className:\"mr-2\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm\",children:\"No context (General AI)\"})]}),/*#__PURE__*/_jsxs(\"label\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:\"contextMode\",value:\"selected\",checked:contextMode==='selected',onChange:()=>handleContextModeChange('selected'),className:\"mr-2\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm\",children:\"Selected documents\"})]}),/*#__PURE__*/_jsxs(\"label\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:\"contextMode\",value:\"all\",checked:contextMode==='all',onChange:()=>handleContextModeChange('all'),className:\"mr-2\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm\",children:\"All documents\"})]})]}),contextMode==='selected'&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-2 text-xs text-blue-600\",children:[selectedDocuments.length,\" document(s) selected\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-sm font-medium text-gray-700 mb-2\",children:[\"Your Documents (\",documents.length,\")\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-2\",children:documents.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500 italic\",children:\"No documents uploaded yet\"}):documents.map(doc=>/*#__PURE__*/_jsx(\"div\",{className:`text-sm p-3 border rounded-lg transition-colors ${selectedDocuments.includes(doc.id)&&contextMode==='selected'?'bg-blue-50 border-blue-200':'bg-gray-50 border-gray-200 hover:bg-gray-100'}`,children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 min-w-0\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center mb-1\",children:[contextMode==='selected'&&/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:selectedDocuments.includes(doc.id),onChange:()=>handleDocumentSelect(doc.id),className:\"mr-2 mt-0.5\"}),/*#__PURE__*/_jsx(\"div\",{className:\"font-medium text-gray-900 truncate\",children:doc.filename})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs text-gray-500 space-y-1\",children:[/*#__PURE__*/_jsx(\"div\",{children:new Date(doc.created_at).toLocaleDateString()}),doc.content_length&&/*#__PURE__*/_jsxs(\"div\",{children:[doc.content_length.toLocaleString(),\" characters\"]})]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDeleteDocument(doc.id),className:\"ml-2 text-red-400 hover:text-red-600 transition-colors\",title:\"Delete document\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"w-4 h-4\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\"})})})]})},doc.id))})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"border-t p-4 flex-shrink-0\",children:isGuestMode?/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>window.location.href='/register',className:\"w-full btn-primary text-center\",children:\"Create Account\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>window.location.href='/login',className:\"w-full btn-secondary text-center\",children:\"Sign In\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleLogout,className:\"w-full text-sm text-gray-600 hover:text-gray-800\",children:\"Exit Guest Mode\"})]}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2 mb-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-8 h-8 bg-primary-100 rounded-full flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-primary-600 font-medium\",children:(user===null||user===void 0?void 0:(_user$full_name=user.full_name)===null||_user$full_name===void 0?void 0:_user$full_name.charAt(0))||'U'})}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium text-gray-700\",children:user===null||user===void 0?void 0:user.full_name})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleLogout,className:\"w-full btn-secondary text-left\",children:\"Logout\"})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 flex flex-col\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"bg-white shadow-sm border-b h-16 flex items-center px-4\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setSidebarOpen(true),className:\"lg:hidden mr-4\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"w-6 h-6\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M4 6h16M4 12h16M4 18h16\"})})}),/*#__PURE__*/_jsx(\"h1\",{className:\"text-xl font-semibold text-gray-800\",children:\"AI Assistant\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 overflow-y-auto p-4 space-y-4\",children:[messages.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"text-center text-gray-500 mt-8\",children:/*#__PURE__*/_jsx(\"p\",{children:\"Welcome! Upload a document and start chatting.\"})}):messages.map(message=>/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-end\",children:/*#__PURE__*/_jsx(\"div\",{className:\"chat-message user max-w-xs sm:max-w-sm md:max-w-md lg:max-w-lg xl:max-w-xl\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-800\",children:message.message})})}),message.response&&/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-start\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"chat-message assistant max-w-xs sm:max-w-sm md:max-w-md lg:max-w-lg xl:max-w-xl\",children:[message.context_documents&&JSON.parse(message.context_documents).length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"mb-2 text-xs text-blue-600 bg-blue-50 px-2 py-1 rounded\",children:[\"\\uD83D\\uDCC4 Using context from: \",JSON.parse(message.context_documents).map(doc=>doc.filename).join(', ')]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-800 whitespace-pre-wrap\",children:message.response})]})})]},message.id)),isLoading&&/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-start\",children:/*#__PURE__*/_jsx(\"div\",{className:\"chat-message assistant max-w-xs sm:max-w-sm md:max-w-md lg:max-w-lg xl:max-w-xl\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-4 w-4 border-b-2 border-primary-600\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-600\",children:\"Thinking...\"})]})})}),/*#__PURE__*/_jsx(\"div\",{ref:messagesEndRef})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white border-t p-4\",children:[contextMode==='selected'&&selectedDocuments.length>0||contextMode==='all'?/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3 text-xs text-blue-600 bg-blue-50 px-3 py-2 rounded-lg\",children:[\"\\uD83D\\uDCAC Context: \",contextMode==='all'?`Using all ${documents.length} document(s) as context`:`Using ${selectedDocuments.length} selected document(s) as context`]}):contextMode==='selected'&&selectedDocuments.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"mb-3 text-xs text-amber-600 bg-amber-50 px-3 py-2 rounded-lg\",children:\"\\u26A0\\uFE0F No documents selected. Select documents in the sidebar or switch to \\\"All documents\\\" mode.\"}):/*#__PURE__*/_jsx(\"div\",{className:\"mb-3 text-xs text-gray-500 bg-gray-50 px-3 py-2 rounded-lg\",children:\"\\uD83E\\uDD16 General AI mode - no document context\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSendMessage,className:\"flex space-x-2\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:inputMessage,onChange:e=>setInputMessage(e.target.value),placeholder:contextMode==='none'?\"Ask me anything...\":\"Ask questions about your documents...\",className:\"flex-1 input-field\",disabled:isLoading}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:isLoading||!inputMessage.trim()||contextMode==='selected'&&selectedDocuments.length===0,className:\"btn-primary disabled:opacity-50\",children:\"Send\"})]})]})]}),/*#__PURE__*/_jsx(ConfirmationModal,{isOpen:isModalOpen,onClose:()=>setIsModalOpen(false),onConfirm:confirmDelete,title:\"Delete Document\",message:\"Are you sure you want to permanently delete this document? This action cannot be undone.\"})]});};export default DashboardPage;","map":{"version":3,"names":["React","useState","useEffect","useRef","useAuth","chatAPI","documentAPI","guestService","ConfirmationModal","jsx","_jsx","jsxs","_jsxs","DashboardPage","_user$full_name","user","logout","isGuestMode","messages","setMessages","inputMessage","setInputMessage","isLoading","setIsLoading","documents","setDocuments","isUploading","setIsUploading","sidebarOpen","setSidebarOpen","selectedDocuments","setSelectedDocuments","contextMode","setContextMode","isModalOpen","setIsModalOpen","documentToDelete","setDocumentToDelete","messagesEndRef","loadChatHistory","loadDocuments","scrollToBottom","_messagesEndRef$curre","current","scrollIntoView","behavior","guestHistory","getChatHistory","convertedMessages","map","msg","id","parseInt","user_id","message","response","context_documents","created_at","history","reverse","error","console","guestDocs","getDocuments","convertedDocs","doc","filename","file_type","content_length","content","length","handleSendMessage","e","preventDefault","trim","userMessage","newUserMessage","Date","now","toISOString","prev","useSelectedDocs","toString","undefined","useAllDocs","generateAIResponse","guestMessage","saveChatMessage","context_sources","JSON","stringify","assistantMessage","slice","sendMessage","handleFileUpload","_e$target$files","file","target","files","extractedText","extractTextFromFile","saveDocument","name","type","systemMessage","upload","alert","handleLogout","handleDocumentSelect","documentId","includes","filter","handleDeleteDocument","confirmDelete","success","deleteDocument","Error","handleContextModeChange","mode","className","children","onClick","fill","stroke","viewBox","strokeLinecap","strokeLinejoin","strokeWidth","d","htmlFor","accept","onChange","disabled","value","checked","toLocaleDateString","toLocaleString","title","window","location","href","full_name","charAt","parse","join","ref","onSubmit","placeholder","isOpen","onClose","onConfirm"],"sources":["/Users/vaibhavmurarka/Desktop/react/ragfrontendfinal/src/pages/DashboardPage.tsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { useAuth } from '../context/AuthContext';\nimport { chatAPI, documentAPI, ChatMessage, Document } from '../services/api';\nimport { guestService, GuestDocument, GuestChatMessage } from '../services/guestService';\nimport ConfirmationModal from '../components/ConfirmationModal';\n\nconst DashboardPage: React.FC = () => {\n  const { user, logout, isGuestMode } = useAuth();\n  const [messages, setMessages] = useState<ChatMessage[]>([]);\n  const [inputMessage, setInputMessage] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  const [documents, setDocuments] = useState<Document[]>([]);\n  const [isUploading, setIsUploading] = useState(false);\n  const [sidebarOpen, setSidebarOpen] = useState(false);\n  const [selectedDocuments, setSelectedDocuments] = useState<number[]>([]);\n  const [contextMode, setContextMode] = useState<'none' | 'selected' | 'all'>('none');\n  const [isModalOpen, setIsModalOpen] = useState(false);\n  const [documentToDelete, setDocumentToDelete] = useState<number | null>(null);\n  const messagesEndRef = useRef<HTMLDivElement>(null);\n\n  useEffect(() => {\n    loadChatHistory();\n    loadDocuments();\n  }, []);\n\n  useEffect(() => {\n    scrollToBottom();\n  }, [messages]);\n\n  const scrollToBottom = () => {\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\n  };\n\n  const loadChatHistory = async () => {\n    try {\n      if (isGuestMode) {\n        const guestHistory = guestService.getChatHistory();\n        // Convert guest messages to regular format for display\n        const convertedMessages = guestHistory.map(msg => ({\n          id: parseInt(msg.id),\n          user_id: -1,\n          message: msg.message,\n          response: msg.response,\n          context_documents: msg.context_documents,\n          created_at: msg.created_at,\n        }));\n        setMessages(convertedMessages);\n      } else {\n        const response = await chatAPI.getChatHistory();\n        setMessages(response.history.reverse());\n      }\n    } catch (error) {\n      console.error('Error loading chat history:', error);\n    }\n  };\n\n  const loadDocuments = async () => {\n    try {\n      if (isGuestMode) {\n        const guestDocs = guestService.getDocuments();\n        // Convert guest documents to regular format for display\n        const convertedDocs = guestDocs.map(doc => ({\n          id: parseInt(doc.id),\n          filename: doc.filename,\n          file_type: doc.file_type,\n          created_at: doc.created_at,\n          content_length: doc.content.length,\n        }));\n        setDocuments(convertedDocs);\n      } else {\n        const response = await documentAPI.getDocuments();\n        setDocuments(response.documents);\n      }\n    } catch (error) {\n      console.error('Error loading documents:', error);\n    }\n  };\n\n  const handleSendMessage = async (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!inputMessage.trim() || isLoading) return;\n\n    const userMessage = inputMessage;\n    setInputMessage('');\n    setIsLoading(true);\n\n    // Add user message to chat\n    const newUserMessage: ChatMessage = {\n      id: Date.now(),\n      user_id: user?.id || 0,\n      message: userMessage,\n      response: '',\n      created_at: new Date().toISOString(),\n    };\n\n    setMessages(prev => [...prev, newUserMessage]);\n\n    try {\n      if (isGuestMode) {\n        // Guest mode - use full AI functionality\n        const useSelectedDocs = contextMode === 'selected' ? selectedDocuments.map(id => id.toString()) : undefined;\n        const useAllDocs = contextMode === 'all';\n        \n        const response = await guestService.generateAIResponse(userMessage, useSelectedDocs, useAllDocs);\n        \n        // Save to guest storage\n        const guestMessage = guestService.saveChatMessage({\n          message: userMessage,\n          response: response.response,\n          context_documents: response.context_sources.length > 0 ? JSON.stringify(response.context_sources) : undefined,\n        });\n\n        // Convert to display format\n        const assistantMessage: ChatMessage = {\n          id: parseInt(guestMessage.id),\n          user_id: -1,\n          message: userMessage,\n          response: response.response,\n          context_documents: guestMessage.context_documents,\n          created_at: guestMessage.created_at,\n        };\n\n        setMessages(prev => [...prev.slice(0, -1), assistantMessage]);\n      } else {\n        // Regular mode - API call\n        const useSelectedDocs = contextMode === 'selected' ? selectedDocuments : undefined;\n        const useAllDocs = contextMode === 'all';\n        \n        const response = await chatAPI.sendMessage(userMessage, useSelectedDocs, useAllDocs);\n        \n        // Add assistant response with context info\n        const assistantMessage: ChatMessage = {\n          id: Date.now() + 1,\n          user_id: user?.id || 0,\n          message: userMessage,\n          response: response.response,\n          context_documents: JSON.stringify(response.context_sources),\n          created_at: new Date().toISOString(),\n        };\n\n        setMessages(prev => [...prev.slice(0, -1), assistantMessage]);\n      }\n    } catch (error) {\n      console.error('Error sending message:', error);\n      // Update the user message to show error\n      setMessages(prev => [...prev.slice(0, -1), {\n        ...newUserMessage,\n        response: 'Sorry, I encountered an error. Please try again.',\n      }]);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleFileUpload = async (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0];\n    if (!file) return;\n\n    setIsUploading(true);\n\n    try {\n      if (isGuestMode) {\n        // Guest mode - process locally\n        const extractedText = await guestService.extractTextFromFile(file);\n        \n        guestService.saveDocument({\n          filename: file.name,\n          content: extractedText,\n          file_type: file.type || 'unknown',\n        });\n\n        loadDocuments();\n        \n        // Add a system message about the upload\n        const systemMessage: ChatMessage = {\n          id: Date.now(),\n          user_id: -1,\n          message: `Uploaded document: ${file.name}`,\n          response: `Successfully uploaded \"${file.name}\" with full text extraction. You can now ask questions about this document or select it for context in your conversations. Your data is stored locally in guest mode and will be cleared when you close the browser.`,\n          created_at: new Date().toISOString(),\n        };\n        \n        setMessages(prev => [...prev, systemMessage]);\n      } else {\n        // Regular mode - API upload\n        await documentAPI.upload(file);\n        loadDocuments();\n        \n        // Add a system message about the upload\n        const systemMessage: ChatMessage = {\n          id: Date.now(),\n          user_id: user?.id || 0,\n          message: `Uploaded document: ${file.name}`,\n          response: `Successfully uploaded \"${file.name}\". You can now ask questions about this document.`,\n          created_at: new Date().toISOString(),\n        };\n        \n        setMessages(prev => [...prev, systemMessage]);\n      }\n    } catch (error) {\n      console.error('Error uploading file:', error);\n      alert('Error uploading file. Please try again.');\n    } finally {\n      setIsUploading(false);\n    }\n  };\n\n  const handleLogout = () => {\n    logout();\n  };\n\n  const handleDocumentSelect = (documentId: number) => {\n    setSelectedDocuments(prev => {\n      if (prev.includes(documentId)) {\n        return prev.filter(id => id !== documentId);\n      } else {\n        return [...prev, documentId];\n      }\n    });\n  };\n\n  const handleDeleteDocument = (documentId: number) => {\n    setDocumentToDelete(documentId);\n    setIsModalOpen(true);\n  };\n\n  const confirmDelete = async () => {\n    if (!documentToDelete) return;\n\n    try {\n      if (isGuestMode) {\n        // Guest mode - delete from local storage\n        const success = guestService.deleteDocument(documentToDelete.toString());\n        if (success) {\n          setDocuments(prev => prev.filter(doc => doc.id !== documentToDelete));\n          setSelectedDocuments(prev => prev.filter(id => id !== documentToDelete));\n          \n          const systemMessage: ChatMessage = {\n            id: Date.now(),\n            user_id: -1,\n            message: 'Document deleted',\n            response: 'The document has been successfully deleted from guest storage.',\n            created_at: new Date().toISOString(),\n          };\n          \n          setMessages(prev => [...prev, systemMessage]);\n        } else {\n          throw new Error('Failed to delete document from local storage');\n        }\n      } else {\n        // Regular mode - API delete\n        await documentAPI.deleteDocument(documentToDelete);\n        setDocuments(prev => prev.filter(doc => doc.id !== documentToDelete));\n        setSelectedDocuments(prev => prev.filter(id => id !== documentToDelete));\n        \n        const systemMessage: ChatMessage = {\n          id: Date.now(),\n          user_id: user?.id || 0,\n          message: 'Document deleted',\n          response: 'The document has been successfully deleted.',\n          created_at: new Date().toISOString(),\n        };\n        \n        setMessages(prev => [...prev, systemMessage]);\n      }\n    } catch (error) {\n      console.error('Error deleting document:', error);\n      alert('Failed to delete the document. Please try again.');\n    } finally {\n      setDocumentToDelete(null);\n    }\n  };\n\n  const handleContextModeChange = (mode: 'none' | 'selected' | 'all') => {\n    setContextMode(mode);\n    if (mode === 'none') {\n      setSelectedDocuments([]);\n    } else if (mode === 'all') {\n      setSelectedDocuments([]);\n    }\n  };\n\n  return (\n    <div className=\"flex h-screen bg-gray-100\">\n      {/* Sidebar */}\n      {/* CORRECTED: Added flex and flex-col to make the sidebar a flex container */}\n      <div className={`${sidebarOpen ? 'translate-x-0' : '-translate-x-full'} fixed inset-y-0 left-0 z-50 w-64 bg-white shadow-lg transform transition-transform duration-300 ease-in-out lg:translate-x-0 lg:static lg:inset-0 flex flex-col`}>\n        {/* Sidebar Header (no changes needed) */}\n        <div className=\"flex items-center justify-between h-16 px-4 bg-primary-600 text-white flex-shrink-0\">\n          <div>\n            <h1 className=\"text-xl font-bold\">AskStash</h1>\n            {isGuestMode && (\n              <span className=\"text-xs bg-amber-500 text-white px-2 py-1 rounded-full\">Guest Mode</span>\n            )}\n          </div>\n          <button\n            onClick={() => setSidebarOpen(false)}\n            className=\"lg:hidden\"\n          >\n            <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n            </svg>\n          </button>\n        </div>\n        \n        {/* CORRECTED: New scrollable content area */}\n        <div className=\"flex-1 overflow-y-auto p-4\">\n          {isGuestMode && (\n            <div className=\"mb-4 p-3 bg-amber-50 border border-amber-200 rounded-lg\">\n              <div className=\"flex items-center mb-2\">\n                <svg className=\"w-4 h-4 text-amber-600 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\n                </svg>\n                <span className=\"text-sm font-medium text-amber-800\">Guest Mode Active</span>\n              </div>\n              <p className=\"text-xs text-amber-700\">\n                Full functionality available! Your data is stored locally and will be cleared when you close the browser. \n                <span className=\"block mt-1 font-medium\">Register for permanent storage across devices!</span>\n              </p>\n            </div>\n          )}\n\n          <div className=\"mb-4\">\n            <label htmlFor=\"file-upload\" className=\"btn-primary block text-center cursor-pointer\">\n              {isUploading ? 'Uploading...' : 'Upload Document'}\n            </label>\n            <input\n              id=\"file-upload\"\n              type=\"file\"\n              className=\"hidden\"\n              accept=\".pdf,.doc,.docx,.txt,.md,.csv,.jpg,.jpeg,.png,.gif,.bmp,.webp,.tiff\"\n              onChange={handleFileUpload}\n              disabled={isUploading}\n            />\n          </div>\n\n          <div className=\"mb-4\">\n            <h3 className=\"text-sm font-medium text-gray-700 mb-2\">Context Mode</h3>\n            <div className=\"space-y-2\">\n              <label className=\"flex items-center\">\n                <input\n                  type=\"radio\"\n                  name=\"contextMode\"\n                  value=\"none\"\n                  checked={contextMode === 'none'}\n                  onChange={() => handleContextModeChange('none')}\n                  className=\"mr-2\"\n                />\n                <span className=\"text-sm\">No context (General AI)</span>\n              </label>\n              \n              <label className=\"flex items-center\">\n                <input\n                  type=\"radio\"\n                  name=\"contextMode\"\n                  value=\"selected\"\n                  checked={contextMode === 'selected'}\n                  onChange={() => handleContextModeChange('selected')}\n                  className=\"mr-2\"\n                />\n                <span className=\"text-sm\">Selected documents</span>\n              </label>\n              \n              <label className=\"flex items-center\">\n                <input\n                  type=\"radio\"\n                  name=\"contextMode\"\n                  value=\"all\"\n                  checked={contextMode === 'all'}\n                  onChange={() => handleContextModeChange('all')}\n                  className=\"mr-2\"\n                />\n                <span className=\"text-sm\">All documents</span>\n              </label>\n            </div>\n            \n            {contextMode === 'selected' && (\n              <div className=\"mt-2 text-xs text-blue-600\">\n                {selectedDocuments.length} document(s) selected\n              </div>\n            )}\n          </div>\n          \n          <div className=\"mb-4\">\n            <h3 className=\"text-sm font-medium text-gray-700 mb-2\">\n              Your Documents ({documents.length})\n            </h3>\n            {/* CORRECTED: Removed max-h-80 and overflow-y-auto */}\n            <div className=\"space-y-2\">\n              {documents.length === 0 ? (\n                <p className=\"text-xs text-gray-500 italic\">No documents uploaded yet</p>\n              ) : (\n                documents.map((doc) => (\n                  <div key={doc.id} className={`text-sm p-3 border rounded-lg transition-colors ${\n                    selectedDocuments.includes(doc.id) && contextMode === 'selected'\n                      ? 'bg-blue-50 border-blue-200' \n                      : 'bg-gray-50 border-gray-200 hover:bg-gray-100'\n                  }`}>\n                    <div className=\"flex items-start justify-between\">\n                      <div className=\"flex-1 min-w-0\">\n                        <div className=\"flex items-center mb-1\">\n                          {contextMode === 'selected' && (\n                            <input\n                              type=\"checkbox\"\n                              checked={selectedDocuments.includes(doc.id)}\n                              onChange={() => handleDocumentSelect(doc.id)}\n                              className=\"mr-2 mt-0.5\"\n                            />\n                          )}\n                          <div className=\"font-medium text-gray-900 truncate\">{doc.filename}</div>\n                        </div>\n                        <div className=\"text-xs text-gray-500 space-y-1\">\n                          <div>{new Date(doc.created_at).toLocaleDateString()}</div>\n                          {doc.content_length && (\n                            <div>{doc.content_length.toLocaleString()} characters</div>\n                          )}\n                        </div>\n                      </div>\n                      \n                      <button\n                        onClick={() => handleDeleteDocument(doc.id)}\n                        className=\"ml-2 text-red-400 hover:text-red-600 transition-colors\"\n                        title=\"Delete document\"\n                      >\n                        <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\" />\n                        </svg>\n                      </button>\n                    </div>\n                  </div>\n                ))\n              )}\n            </div>\n          </div>\n        </div>\n        \n        {/* CORRECTED: Moved the user/logout section out to be a fixed footer */}\n        <div className=\"border-t p-4 flex-shrink-0\">\n          {isGuestMode ? (\n            <div className=\"space-y-3\">\n              <button\n                onClick={() => window.location.href = '/register'}\n                className=\"w-full btn-primary text-center\"\n              >\n                Create Account\n              </button>\n              <button\n                onClick={() => window.location.href = '/login'}\n                className=\"w-full btn-secondary text-center\"\n              >\n                Sign In\n              </button>\n              <button\n                onClick={handleLogout}\n                className=\"w-full text-sm text-gray-600 hover:text-gray-800\"\n              >\n                Exit Guest Mode\n              </button>\n            </div>\n          ) : (\n            <div>\n              <div className=\"flex items-center space-x-2 mb-2\">\n                <div className=\"w-8 h-8 bg-primary-100 rounded-full flex items-center justify-center\">\n                  <span className=\"text-primary-600 font-medium\">\n                    {user?.full_name?.charAt(0) || 'U'}\n                  </span>\n                </div>\n                <span className=\"text-sm font-medium text-gray-700\">{user?.full_name}</span>\n              </div>\n              <button\n                onClick={handleLogout}\n                className=\"w-full btn-secondary text-left\"\n              >\n                Logout\n              </button>\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* Main Content (no changes needed here) */}\n      <div className=\"flex-1 flex flex-col\">\n        {/* Header */}\n        <header className=\"bg-white shadow-sm border-b h-16 flex items-center px-4\">\n          <button\n            onClick={() => setSidebarOpen(true)}\n            className=\"lg:hidden mr-4\"\n          >\n            <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 6h16M4 12h16M4 18h16\" />\n            </svg>\n          </button>\n          <h1 className=\"text-xl font-semibold text-gray-800\">AI Assistant</h1>\n        </header>\n\n        {/* Chat Messages */}\n        <div className=\"flex-1 overflow-y-auto p-4 space-y-4\">\n          {messages.length === 0 ? (\n            <div className=\"text-center text-gray-500 mt-8\">\n              <p>Welcome! Upload a document and start chatting.</p>\n            </div>\n          ) : (\n            messages.map((message) => (\n              <div key={message.id} className=\"space-y-2\">\n                {/* User Message */}\n                <div className=\"flex justify-end\">\n                  <div className=\"chat-message user max-w-xs sm:max-w-sm md:max-w-md lg:max-w-lg xl:max-w-xl\">\n                    <p className=\"text-sm text-gray-800\">{message.message}</p>\n                  </div>\n                </div>\n                \n                {/* Assistant Response */}\n                {message.response && (\n                  <div className=\"flex justify-start\">\n                    <div className=\"chat-message assistant max-w-xs sm:max-w-sm md:max-w-md lg:max-w-lg xl:max-w-xl\">\n                      {/* Context indicator */}\n                      {message.context_documents && JSON.parse(message.context_documents).length > 0 && (\n                        <div className=\"mb-2 text-xs text-blue-600 bg-blue-50 px-2 py-1 rounded\">\n                          📄 Using context from: {\n                            JSON.parse(message.context_documents).map((doc: any) => doc.filename).join(', ')\n                          }\n                        </div>\n                      )}\n                      <p className=\"text-sm text-gray-800 whitespace-pre-wrap\">{message.response}</p>\n                    </div>\n                  </div>\n                )}\n              </div>\n            ))\n          )}\n          \n          {isLoading && (\n            <div className=\"flex justify-start\">\n              <div className=\"chat-message assistant max-w-xs sm:max-w-sm md:max-w-md lg:max-w-lg xl:max-w-xl\">\n                <div className=\"flex items-center space-x-2\">\n                  <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-primary-600\"></div>\n                  <span className=\"text-sm text-gray-600\">Thinking...</span>\n                </div>\n              </div>\n            </div>\n          )}\n          \n          <div ref={messagesEndRef} />\n        </div>\n\n        {/* Message Input */}\n        <div className=\"bg-white border-t p-4\">\n          {/* Context status indicator */}\n          {(contextMode === 'selected' && selectedDocuments.length > 0) || contextMode === 'all' ? (\n            <div className=\"mb-3 text-xs text-blue-600 bg-blue-50 px-3 py-2 rounded-lg\">\n              💬 Context: {\n                contextMode === 'all' \n                  ? `Using all ${documents.length} document(s) as context`\n                  : `Using ${selectedDocuments.length} selected document(s) as context`\n              }\n            </div>\n          ) : contextMode === 'selected' && selectedDocuments.length === 0 ? (\n            <div className=\"mb-3 text-xs text-amber-600 bg-amber-50 px-3 py-2 rounded-lg\">\n              ⚠️ No documents selected. Select documents in the sidebar or switch to \"All documents\" mode.\n            </div>\n          ) : (\n            <div className=\"mb-3 text-xs text-gray-500 bg-gray-50 px-3 py-2 rounded-lg\">\n              🤖 General AI mode - no document context\n            </div>\n          )}\n          \n          <form onSubmit={handleSendMessage} className=\"flex space-x-2\">\n            <input\n              type=\"text\"\n              value={inputMessage}\n              onChange={(e) => setInputMessage(e.target.value)}\n              placeholder={\n                contextMode === 'none' \n                  ? \"Ask me anything...\" \n                  : \"Ask questions about your documents...\"\n              }\n              className=\"flex-1 input-field\"\n              disabled={isLoading}\n            />\n            <button\n              type=\"submit\"\n              disabled={isLoading || !inputMessage.trim() || (contextMode === 'selected' && selectedDocuments.length === 0)}\n              className=\"btn-primary disabled:opacity-50\"\n            >\n              Send\n            </button>\n          </form>\n        </div>\n      </div>\n      <ConfirmationModal\n        isOpen={isModalOpen}\n        onClose={() => setIsModalOpen(false)}\n        onConfirm={confirmDelete}\n        title=\"Delete Document\"\n        message=\"Are you sure you want to permanently delete this document? This action cannot be undone.\"\n      />\n    </div>\n  );\n};\n\nexport default DashboardPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}